
Для того чтобы переработать данный код согласно принципам "чистой архитектуры", следуя принципам Boundary-Control-Entity (BCE), 
мы разделим код на соответствующие компоненты: domain, data и presentation. 
Каждый компонент будет отвечать за свои задачи и будет взаимодействовать с другими через абстракции.

В этой переработанной версии программы мы разделили компоненты по пакетам: domain, data и presentation. Domain содержит класс Book, представляющий бизнес-объект. Data содержит интерфейс BookRepository и его реализацию InMemoryBookRepository, отвечающую за хранение и управление данными о книгах. Presentation содержит класс Main, который является точкой входа и обрабатывает пользовательские запросы.

Компоненты взаимодействуют между собой через абстракции (интерфейс BookRepository), что обеспечивает более гибкую и чистую архитектуру.